(this.webpackJsonpfitmeup=this.webpackJsonpfitmeup||[]).push([[0],{38:function(e,t,a){"use strict";a.r(t),a.d(t,"SetCookie",(function(){return r})),a.d(t,"DeleteCookie",(function(){return l})),a.d(t,"hasCookie",(function(){return c})),a.d(t,"setReloadCookie",(function(){return i})),a.d(t,"hasReloadCookie",(function(){return s}));var n=a(11),o=new(a(44).a),r=function(e){for(var t={maxAge:3600},a=0,r=Object.entries(e);a<r.length;a++){var l=Object(n.a)(r[a],2),c=l[0],i=l[1];o.set(c,i,t)}},l=function(e){e.forEach((function(e){o.remove(e)}))},c=function(){var e={haslogin:!1};return o.get("accessToken")&&(e.haslogin=!0,["accessToken","email","givenName","familyName","imageUrl","name","googleId"].forEach((function(t){e[t]=o.get(t)||"lorem ipsum"}))),e},i=function(){var e=new Date;o.set("lastReload",e.getTime(),{maxAge:3600})},s=function(){return o.get("lastReload")?{present:!0,date:parseInt(o.get("lastReload"))}:{present:!1}}},45:function(e,t,a){e.exports=a(78)},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t),a.d(t,"extractElement",(function(){return n})),a.d(t,"extractDate",(function(){return o}));var n=function(e,t){return e.map((function(e){return e[t]}))},o=function(e){return e.map((function(e){return"".concat(e.Date.getDate(),"-").concat(e.Date.getMonth(),"-").concat(e.Date.getFullYear())}))}},52:function(e,t,a){"use strict";a.r(t),a.d(t,"getRequestHeaders",(function(){return d})),a.d(t,"getAggregatedDataBody",(function(){return g})),a.d(t,"getAggregateData",(function(){return p})),a.d(t,"getWeeklyData",(function(){return v}));var n=a(8),o=a(16),r=a.n(o),l=a(27),c=a(28),i=a.n(c),s=a(38),u=s.setReloadCookie,m=s.hasReloadCookie,f=[{title:"Calories",type:"com.google.calories.expended"},{title:"Heart",type:"com.google.heart_minutes"},{title:"Move",type:"com.google.active_minutes"},{title:"Steps",type:"com.google.step_count.delta"}],d=function(e){return{params:{key:"AIzaSyBA1Ro7_8xZLFHDTIniRK3C8a9pMGjdxd4"},headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}}},g=function(e,t){return{aggregateBy:[{dataTypeName:e}],bucketByTime:{durationMillis:864e5},endTimeMillis:t,startTimeMillis:t-6048e5}},p=function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("https://www.googleapis.com/fitness/v1/users/me/dataset:aggregate",t,a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h={Calories:0,Heart:0,Move:0,Steps:0},v=function(){var e=Object(l.a)(r.a.mark((function e(t,a,o,l){var c,s,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],s=[],!m().present||0===l.length){for(d=6;d>=0;d--)p=new Date(t-864e5*d),c.push(Object(n.a)(Object(n.a)({},h),{},{Date:p}));f.forEach((function(e){var n=g(e.type,t);s.push(i.a.post("https://www.googleapis.com/fitness/v1/users/me/dataset:aggregate",n,a).then((function(t){for(var a=function(a){t.data.bucket[a].dataset[0].point.forEach((function(t){t.value.forEach((function(t){var n=t.intVal||Math.ceil(t.fpVal)||0;c[a][e.title]+=n}))}))},n=0;n<7;n++)a(n)})))})),Promise.all(s).then((function(){o(c)})),u()}case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,o){return e.apply(this,arguments)}}()},71:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(12),l=a.n(r),c=(a(50),a(8)),i=a(11),s=a(85),u=a(86),m=(a(14),a(26)),f=a(81),d=a(82),g=a(83),p=a(84),h=a(80),v=a(87),E=function(e){return o.a.createElement(v.a,{className:"mb-2 text-center",style:{backgroundColor:"#272727",color:"#ffffff"}},o.a.createElement(v.a.Body,null,o.a.createElement(v.a.Title,null,e.element.title),o.a.createElement(v.a.Subtitle,null,e.element.value)))},b=function(e){var t=e.selected;0===t.length&&(t=[0,1,2,3,4,5,6]);var a=e.data,n={Calories:0,Heart:0,Move:0,Steps:0};return a.length>0&&t.forEach((function(e){n.Calories+=a[e].Calories,n.Heart+=a[e].Heart,n.Move+=a[e].Move,n.Steps+=a[e].Steps})),o.a.createElement("div",null,o.a.createElement(h.a,null,o.a.createElement(E,{element:{title:"Calories Burnt",value:n.Calories,id:0}}),o.a.createElement(E,{element:{title:"Heart Points",value:n.Heart,id:1}}),o.a.createElement(E,{element:{title:"Move Minutes",value:n.Move,id:2}}),o.a.createElement(E,{element:{title:"Steps Travelled",value:n.Steps,id:3}})))},k=function(e){return o.a.createElement(v.a,{className:"mb-2 text-center",style:{backgroundColor:"#272727",color:"#ffffff"}},o.a.createElement(v.a.Body,null,o.a.createElement(v.a.Title,null,"Welcome ",e.user.name),o.a.createElement(v.a.Subtitle,null,"Your Google Fit Stats are aggregated below!")))},y=a(24),w=a.n(y),T=a(39),C=a.n(T),x=a(51),j=x.extractElement,M=x.extractDate,S={color:"#ffffff"},O=function(e){var t={chart:{type:"column",backgroundColor:"#272727"},title:{text:"Your Weekly Fitness Data",style:S},credits:{text:""},xAxis:{categories:M(e.data),crosshair:!0,labels:{style:S}},yAxis:{min:0,gridLineWidth:0},legend:{backgroundColor:"#A9A9A9"},tooltip:{backgroundColor:"#272727",headerFormat:'<span style="font-size:10px; color:white">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0"><b>{series.name}: </b></td><td style="padding:0; color:white"><b>{point.y} units</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0,stacking:"percent"}},colors:["#ff3d00","#00e676","#651fff","#00e5ff"],series:[{name:"Calories Burnt",data:j(e.data,"Calories")},{name:"Heart Points",data:j(e.data,"Heart")},{name:"Move Minutes",data:j(e.data,"Move")},{name:"Steps",data:j(e.data,"Steps")}]};return o.a.createElement("div",null,o.a.createElement(C.a,{highcharts:w.a,options:t}))},D=a(52),A=D.getRequestHeaders,F=D.getWeeklyData,H=function(e){var t=e.user.accessToken;console.log("props.user",e.user),console.log("props.user.accessToken",e.user.accessToken);var a=Object(n.useState)([]),r=Object(i.a)(a,2),l=r[0],c=r[1],s=[0,1,2,3,4,5,6];if(e.user.haslogin){var u=A(t),m=(new Date).getTime();F(m,u,(function(e){c(e)}),l)}return o.a.createElement("div",null,o.a.createElement(f.a,{className:"p-3"},o.a.createElement(d.a,{style:{backgroundColor:"#272727",color:"#ffffff"}},o.a.createElement("h1",{className:"header"},"Welcome To Fit Me Up Visualizer"),e.user.haslogin?null:o.a.createElement("div",null,o.a.createElement("h3",null," Please login"))),e.user.haslogin?o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(k,{user:e.user}))),o.a.createElement(g.a,null,o.a.createElement("div",null,o.a.createElement("br",null))),o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(b,{user:e.user,selected:s,data:l}))),o.a.createElement(g.a,null,o.a.createElement("div",null,o.a.createElement("br",null))),o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(O,{data:l,selected:s})))):null))},B=(a(71),a(38)),N=B.SetCookie,R=B.DeleteCookie,W=B.hasCookie,I="388230540845-vhd4a7govrcgjkdcia7lgcr3ti4jj41g.apps.googleusercontent.com",L=function(){var e=Object(n.useState)({haslogin:!1,accessToken:""}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=W();e.haslogin&&r(Object(c.a)({},e))}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{collapseOnSelect:!0,expand:"lg",style:{backgroundColor:"#272727"}},o.a.createElement(s.a.Brand,{href:"#home",style:{color:"#ffffff"}},"Fit Me Up"),o.a.createElement(u.a,{className:"mr-auto"}),o.a.createElement(u.a,null,a.haslogin?o.a.createElement(m.GoogleLogout,{clientId:I,buttonText:"Logout",onLogoutSuccess:function(e){r({haslogin:!1,accessToken:""}),R(["accessToken","email","givenName","familyName","imageUrl","name","googleId"])},onFailure:function(e){alert("Failed to log out")}}):o.a.createElement(m.GoogleLogin,{clientId:I,buttonText:"Login",onSuccess:function(e){e.accessToken&&r(Object(c.a)(Object(c.a)({},e.profileObj),{},{haslogin:!0,accessToken:e.accessToken})),N(Object(c.a)(Object(c.a)({},e.profileObj),{},{accessToken:e.accessToken}))},onFailure:function(e){alert("Failed to log in")},cookiePolicy:"single_host_origin",responseType:"code,token",scope:"https://www.googleapis.com/auth/fitness.activity.read https://www.googleapis.com/auth/fitness.location.read"}))),o.a.createElement(H,{user:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.46d252ab.chunk.js.map